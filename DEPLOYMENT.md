# Supabase + Vercel Deployment Guide

## Step 1: Create Supabase Table

1. Go to your Supabase dashboard: https://supabase.com/dashboard
2. Open your project: `oqvprhxtvyjosdxalnxw`
3. Go to **SQL Editor**
4. Run the following SQL:

```sql
-- Create brands table for Zid Dashboard
CREATE TABLE IF NOT EXISTS brands (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name TEXT NOT NULL,
    category TEXT NOT NULL,
    starting_sales DECIMAL(12,2) NOT NULL DEFAULT 0,
    monthly_growth_rate DECIMAL(5,2) NOT NULL DEFAULT 0,
    starting_month INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create an index on category for faster filtering
CREATE INDEX IF NOT EXISTS brands_category_idx ON brands(category);

-- Insert default brands data
INSERT INTO brands (name, category, starting_sales, monthly_growth_rate, starting_month) 
VALUES 
    ('Crush', 'Premium Food', 60000.00, 15.50, 0),
    ('Milaf', 'Traditional Goods', 10000.00, 8.20, 0),
    ('Bab Sharqi', 'Traditional Goods', 10000.00, 3.10, 0),
    ('Nuricle', 'Health & Beauty', 10000.00, 6.80, 0),
    ('Reeq Al Nahl', 'Premium Food', 5000.00, 12.30, 0),
    ('Leen Dates', 'Premium Food', 20000.00, 5.50, 0)
ON CONFLICT (id) DO NOTHING;

-- Enable Row Level Security (RLS)
ALTER TABLE brands ENABLE ROW LEVEL SECURITY;

-- Create policy to allow all operations
CREATE POLICY IF NOT EXISTS "Allow all operations on brands" ON brands
    FOR ALL USING (true) WITH CHECK (true);
```

## Step 2: Add Environment Variables to Vercel

Run this command to add all Supabase environment variables to Vercel:

```bash
vercel env add SUPABASE_URL
# Enter: https://oqvprhxtvyjosdxalnxw.supabase.co

vercel env add SUPABASE_SERVICE_ROLE_KEY
# Enter: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xdnByaHh0dnlqb3NkeGFsbnh3Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDUzOTI5MCwiZXhwIjoyMDcwMTE1MjkwfQ.9Exg87M4p_f7HVuA6XkxqBf7kcH_Nk4nEdJ4PTHR2tM

vercel env add NEXT_PUBLIC_SUPABASE_URL  
# Enter: https://oqvprhxtvyjosdxalnxw.supabase.co

vercel env add NEXT_PUBLIC_SUPABASE_ANON_KEY
# Enter: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9xdnByaHh0dnlqb3NkeGFsbnh3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MzkyOTAsImV4cCI6MjA3MDExNTI5MH0.uVhhuZr0PN4ZnJZ5ChK8RfKO4QXA2-oH4aJlgwtX8GQ
```

## Step 3: Deploy with Environment Variables

```bash
vercel --prod
```

## Step 4: Test Your App

1. Go to: https://zid-dashboard-download-mo0dy7qbt-bannaa.vercel.app
2. Login with: `admin` / `admin123`
3. Test adding/editing brands
4. Data should persist across devices!

## API Endpoints

- `GET /api/brands` - Get all brands
- `POST /api/brands` - Create new brand
- `PUT /api/brands?id=<id>` - Update brand
- `DELETE /api/brands?id=<id>` - Delete brand
- `POST /api/reset` - Reset to default brands